# 주소기반산업지원서비스 API 연동 가이드

## 개요

출원인 정보 입력 시 주소 검색 기능을 위해 행정안전부의 **주소기반산업지원서비스** 팝업 API를 사용합니다.

## API 신청 방법

### 1. 회원가입 및 신청

1. [주소기반산업지원서비스](https://business.juso.go.kr/) 접속
2. 회원가입 진행 (기업/개인 선택)
3. 로그인 후 **API 신청 > 팝업API** 메뉴 선택
4. 신청 양식 작성:
   - 서비스 명: 상표 출원 시스템 (또는 서비스 이름)
   - 사용 목적: 출원인 정보 주소 입력
   - 승인IP: 개발 서버 및 운영 서버 IP 입력
5. 신청 후 승인 대기 (보통 1~2 영업일)

### 2. 승인키 발급

- 승인 완료 시 이메일로 승인키(confmKey) 전달
- 또는 **API 신청 > 신청 내역** 메뉴에서 확인 가능

### 3. 승인키 설정

`.env.local` 파일에 승인키를 추가:

```bash
NEXT_PUBLIC_JUSO_API_KEY=여기에-발급받은-승인키-입력
```

**기본값**: 테스트 키가 코드에 설정되어 있음
- `.env.local` 파일이 없으면 테스트 키 사용
- 개발/테스트 환경에서는 그대로 사용 가능
- 운영 환경에서는 정식 승인키로 교체 필수

## 개발/테스트 환경

- 기본 테스트 키가 `src/app/popup/juso/page.tsx`에 설정되어 있음
- `.env.local` 파일에 `NEXT_PUBLIC_JUSO_API_KEY`를 설정하면 해당 키 우선 사용
- 제한된 기능만 제공될 수 있으므로 정식 승인키 발급을 권장합니다

## API 사용 방법

### 출원인 정보 입력 폼

1. "주소 검색" 버튼 클릭
2. 팝업 창에서 주소 검색
3. 원하는 주소 선택
4. 자동으로 우편번호, 도로명주소, 지번주소가 입력됨

### 제공되는 정보

- **우편번호** (zipNo): 5자리 우편번호
- **도로명주소** (roadAddrPart1): 도로명주소 (참고항목 제외)
- **지번주소** (jibunAddr): 지번 주소
- **영문주소** (engAddr): 영문 도로명주소
- **상세 주소** (addrDetail): 사용자가 직접 입력한 상세 주소

## 기술 구조

### 1. 팝업 페이지 (`src/app/popup/juso/page.tsx`)

Next.js App Router 기반 팝업 페이지:
- `inputYn !== 'Y'`: JUSO API로 POST 요청 (최초 호출)
- `inputYn === 'Y'`: 부모 창으로 주소 데이터 전달 (주소 선택 후)
- 동적 폼 생성 및 자동 제출
- 25개 파라미터를 부모 창의 콜백 함수로 전달

### 2. AddressSearchModal 컴포넌트 (`src/components/applicants/AddressSearchModal.tsx`)

- 팝업 창 제어 (`window.open`)
- 전역 콜백 함수 `window.jusoCallBack` 등록
- JUSO API 공식 스펙에 따라 25개 개별 파라미터 수신
- AddressResult 타입으로 변환하여 onSelect 콜백 호출

### 3. ApplicantForm 통합 (`src/components/applicants/ApplicantForm.tsx`)

- 주민등록상 주소 검색
- 송달장소 주소 검색
- "위 주민등록상 주소와 동일" 체크 시 자동 동기화
- 우편번호, 도로명주소, 지번주소 자동 입력

## 참고 사항

### API 호출 제한

- 일일 호출 제한: 신청 시 설정한 양에 따라 다름
- 초과 시 서비스 일시 중단 가능

### IP 제한

- 신청 시 등록한 IP에서만 호출 가능
- 서버 IP 변경 시 재신청 필요

### 보안

- 승인키는 환경 변수로 관리
- `.env.local` 파일은 Git에 커밋하지 않음
- `NEXT_PUBLIC_` 접두사로 클라이언트에서 접근 가능

## 문의

API 관련 문의: [주소기반산업지원서비스 고객센터](https://business.juso.go.kr/)
- 전화: 1544-0145
- 평일 09:00 ~ 18:00 (점심시간 12:00 ~ 13:00)
